fill = region, # different color for each state
map_id = region)) +
coord_fixed(1.3) +
theme(legend.position = "none") # remove the legend
#| echo: true
tn_map <-
state_map %>%
filter(region == "tennessee")
ggplot(data = tn_map) +
geom_map(map = tn_map,
aes(x = long,
y = lat,
map_id = region)) +
coord_fixed(1.3) +
theme(legend.position = "none") # remove the legend
a<-read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2023/2023-06-06/owid-energy.csv")
??head
mtcars %>% head(x = 4)
mtcars %>% head(4)
mtcars %>% head(10)
library(maps)
state_map <- map_data("state")
state_map
state_map %>% head()
mtcars
mtcars %>% head()
library(tidyverse)
mtcars %>%
group_by(cyl) %>%
head()
table(mtcars$cyl)
dat <-
tibble::tribble(
~state, ~value,
"tennessee",    23L,
"Tennessee",    42L,
"TN",    12L,
"tennessee",    34L
)
dat <-
tibble::tribble(
~state, ~value,
"tennessee",    23L,
"Tennessee",    42L,
"TN",    12L,
"tennessee",    34L
)
View(dat)
dat %>%
mutate(new_name = tolower(state))
dat %>%
mutate(new_name = case_when(state == "Tennessee" ~ "tennessee",
state == "TN" ~ "tennessee",
.default = state))
dat %>%
mutate(new_name = case_when(state %in% c("Tennessee", "TN") ~ "tennessee",
.default = state))
library(tidyverse)
library(maps)
bear_dat <-
read_csv(here::here("week-11", "data", "bear.csv"))
bear_dat <-
read_csv(here::here("week-11", "data", "bears.csv"))
bear_dat <-
read_csv(here::here("week-11", "data", "bears.csv"))
View(bear_dat)
world_map <- map_data("world")
View(world_map)
table(bear_dat$place_county_name)
table(bear_dat$place_country_name)
bear_dat_grouped <-
bear_dat %>%
mutate(place_country_name = case_match(place_country_name,
"United States" ~ "USA",
.default = place_country_name))
table(bear_dat_grouped$place_country_name)
bear_dat_grouped <-
bear_dat %>%
mutate(place_country_name = case_match(place_country_name,
"United States" ~ "USA",
.default = place_country_name)) %>%
group_by(place_country_name) %>%
summarize(n_bears = n())
View(bear_dat_grouped)
bear_map <-
left_join(world_map, bear_dat_grouped, join_by(region == place_country_name))
View(bear_map)
View(bear_map)
ggplot(data = bear_map) +
geom_map(map = bear_map,
aes(x = long,
y = lat,
fill = n_bear,
map_id = region)) +
coord_fixed(1.3)
View(bear_map)
ggplot(data = bear_map) +
geom_map(map = bear_map,
aes(x = long,
y = lat,
fill = n_bears,
map_id = region)) +
coord_fixed(1.3)
ggplot(data = bear_map) +
geom_map(map = bear_map,
aes(x = long,
y = lat,
fill = n_bears,
map_id = region),
linewidth = 0.1,
color = "white") +
coord_fixed(1.3) +
lab(title = "Bears around the world")
ggplot(data = bear_map) +
geom_map(map = bear_map,
aes(x = long,
y = lat,
fill = n_bears,
map_id = region),
linewidth = 0.1,
color = "white") +
coord_fixed(1.3) +
labs(title = "Bears around the world")
ggplot(data = bear_map) +
geom_map(map = bear_map,
aes(x = long,
y = lat,
fill = n_bears,
map_id = region),
linewidth = 0.1,
color = "white") +
coord_fixed(1.3) +
labs(title = "Bears around the world") +
theme_minimal()
library(viridis)
ggplot(data = bear_map) +
geom_map(map = bear_map,
aes(x = long,
y = lat,
fill = n_bears,
map_id = region),
linewidth = 0.1,
color = "white") +
coord_fixed(1.3) +
labs(title = "Bears around the world") +
theme_minimal() +
scale_fill_viridis(option = "magma")
ggplot(data = bear_map) +
geom_map(map = bear_map,
aes(x = long,
y = lat,
fill = n_bears,
map_id = region),
linewidth = 0.1,
color = "white") +
geom_point(data = bear_dat,
aes(x = longitude,
y = latitude,
color = common_name)) +
coord_fixed(1.3) +
labs(title = "Bears around the world") +
theme_minimal() +
scale_fill_viridis(option = "magma")
ggplot(data = bear_map) +
geom_map(map = bear_map,
aes(x = long,
y = lat,
fill = n_bears,
map_id = region),
linewidth = 0.1,
color = "white") +
geom_point(data = bear_dat,
aes(x = longitude,
y = latitude,
color = common_name)) +
coord_fixed(1.3) +
labs(title = "Bears around the world") +
theme_minimal() +
scale_fill_viridis(option = "magma") +
theme(legend.position = "none")
ggplot(data = bear_map) +
geom_map(map = bear_map,
aes(x = long,
y = lat,
fill = n_bears,
map_id = region),
linewidth = 0.1,
color = "white") +
geom_point(data = bear_dat,
aes(x = longitude,
y = latitude,
color = common_name),
alpha = 0.3,
size = 0.1) +
coord_fixed(1.3) +
labs(title = "Bears around the world") +
theme_minimal() +
scale_fill_viridis(option = "magma") +
theme(legend.position = "none")
ggplot(data = bear_map) +
geom_map(map = bear_map,
aes(x = long,
y = lat,
fill = n_bears,
map_id = region),
linewidth = 0.1,
color = "white") +
geom_point(data = bear_dat,
aes(x = longitude,
y = latitude,
color = common_name),
alpha = 0.3,
size = 0.1,
show.legend = FALSE) +
coord_fixed(1.3) +
labs(title = "Bears around the world") +
theme_minimal() +
scale_fill_viridis(option = "magma")
ggplot(data = bear_map) +
geom_map(map = bear_map,
aes(x = long,
y = lat,
fill = n_bears,
map_id = region),
linewidth = 0.1,
color = "white") +
geom_point(data = bear_dat,
aes(x = longitude,
y = latitude,
color = common_name),
alpha = 0.3,
size = 0.1,
show.legend = FALSE) +
coord_fixed(1.3) +
labs(title = "Bears around the world") +
theme_minimal() +
scale_fill_viridis(option = "magma")
ggplot(data = bear_map) +
geom_map(map = bear_map,
aes(x = long,
y = lat,
fill = n_bears,
map_id = region),
linewidth = 0.1,
color = "white") +
geom_point(data = bear_dat,
aes(x = longitude,
y = latitude,
color = common_name),
alpha = 0.3,
size = 0.1) +
coord_fixed(1.3) +
labs(title = "Bears around the world") +
theme_minimal() +
scale_fill_viridis(option = "magma") +
theme(legend.position = "none")
bear_dat <-
read_csv(here::here("week-11", "data", "bears.csv"))
library(tidyverse)
library(maps)
bear_dat <-
read_csv(here::here("week-11", "data", "bears.csv"))
View(bear_dat)
usethis::git_vaccinate()
bear_dat2 <- bear_dat %>% select(common_name, place_country_name, latitude, longitude, observed_on)
View(bear_dat2)
bear_dat2 <- bear_dat2 %>% drop_na()
write_csv(bear_dat2, file.choose())
library(tidyverse)
library(maps)
bear_dat <-
read_csv(here::here("week-11", "data", "bears.csv"))
View(bear_dat)
usethis::git_vaccinate()
bear_dat2 <- bear_dat %>% select(common_name, place_country_name, latitude, longitude, observed_on)
View(bear_dat2)
bear_dat2 <- bear_dat2 %>% drop_na()
bear_dat3 <- bear_dat2 %>% group_by(place_country_name) %>% summarize(n_bears = n())
View(bear_dat3)
file.choose()
write_csv(bear_dat3, "/Users/ivelasq/Python/bear-sightings/bears_agg.csv")
usethis::git_vaccinate()
usethis::edit_r_environ()
Sys.setenv(CENSUS_KEY = "5a7f224123bfe155d63847c278ec63af03dc1165")
usethis::edit_r_environ()
Sys.setenv(CENSUS_KEY = "5a7f224123bfe155d63847c278ec63af03dc1165")
usethis::edit_r_environ()
Sys.getenv("CENSUS_KEY")
library(tidycensus)
census_api_key(Sys.getenv("CENSUS_KEY"), install = TRUE)
v16 <- load_variables(2016, "acs5", cache = TRUE)
library(tidycensus)
v16 <- load_variables(2016, "acs5", cache = TRUE)
View(v16)
```r
v16 <- load_variables(2016, "acs1", cache = TRUE)
View(v16)
```r
v16 <- load_variables(2016, "sf1", cache = TRUE)
v16 <- load_variables(2010, "sf1", cache = TRUE)
View(v16)
v16 <- load_variables(2016, "acs5", cache = TRUE)
View(v16)
table(v16$geography)
View(v16)
View(v16)
v16 <- load_variables(2016, "sf1", cache = TRUE) %>%
filter(geography == "state")
library(tidyverse)
View(v16)
v16 <- load_variables(2016, "sf1", cache = TRUE) %>%
filter(geography == "state")
v16 <- load_variables(2016, "acs5", cache = TRUE) %>%
filter(geography == "state")
View(v16)
get_acs(geograph = "school district (unified)")
get_acs(geography = "school district (unified)")
v16 <- load_variables(2016, "acs5/profile", cache = TRUE)
View(v16)
usethis::edit_r_environ()
View(v16)
View(v16)
pct_with_bb <-
get_acs(
geography = "school district (unified)",
variables = "DP02_0152P",
state = "TN",
geometry = TRUE
)
View(pct_with_bb)
ggplot(data = pct_with_bb,
aes(fill = estimate)) +
geom_sf()
library(sf)
nc <- st_read(system.file("shape/nc.shp", package = "sf"))
class(nc)
head(nc)
head(st_geometry(nc[1, ])[[1]][[1]])
plot(st_geometry(nc[1, ]))
??st_read
ggplot(data = nc) +
geom_sf()
#| echo: true
ggplot(data = nc) +
geom_sf() +
theme_void()
#| echo: true
ggplot(data = nc) +
geom_sf(fill = "blue",
border = "white") +
theme_void()
#| echo: true
ggplot(data = nc) +
geom_sf(fill = "blue",
color = "white") +
theme_void()
#| echo: true
ggplot(data = nc) +
geom_sf(fill = "#0C1337",
color = "white") +
theme_void()
library(tigris)
library(tigris)
??school_districts()
schools <- school_districts("Tennessee")
ggplot(tn_schools) +
geom_sf()
tn_schools <- school_districts("Tennessee")
ggplot(tn_schools) +
geom_sf()
class(tn_schools)
tn_schools
View(tn_schools)
data <- get_education_data(level = "school-districts",
source = "ccd",
topic = "finance",
filters = list(year = 2018,
fips = 47))
library(educationdata)
data <- get_education_data(level = "school-districts",
source = "ccd",
topic = "finance",
filters = list(year = 2018,
fips = 47))
View(data)
tn_districts <- school_districts("Tennessee")
class(tn_districts)
View(tn_districts)
View(tn_districts)
edu_data <- get_education_data(level = "school-districts",
source = "ccd",
topic = "finance",
filters = list(year = 2018,
fips = 47))
View(edu_data)
tn_data <-
left_join(tn_districts, edu_data, join_by(GEOID == leaid))
View(tn_data)
View(tn_data)
colnames(tn_data)
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch))
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch),
color = "white") %>%
theme_void() +
labs(title = "State revenue for school lunch programs")
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch),
color = "white") %>%
theme_void() +
labs(title = "State revenue for school lunch programs")
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch),
color = "white") +
theme_void() +
labs(title = "State revenue for school lunch programs")
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch),
color = "white") +
theme_void() +
labs(title = "State revenue for school lunch programs",
fill = "Revenue")
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch),
color = "white") +
theme_void() +
labs(title = "State revenue for school lunch programs",
fill = "Revenue") +
scale_fill_continuous(labels = dollar)
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch),
color = "white") +
theme_void() +
labs(title = "State revenue for school lunch programs",
fill = "Revenue") +
scale_fill_continuous(labels = dollars)
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch),
color = "white") +
theme_void() +
labs(title = "State revenue for school lunch programs",
fill = "Revenue") +
scale_fill_continuous(labels = scales::dollar)
st_read(here::here("data", "Knoxville-Knox_County_Zoning.shp"))
st_read(here::here("week-12", "data", "Knoxville-Knox_County_Zoning.shp"))
st_read(here::here("week-12", "data", "Knoxville-Knox_County_Zoning.shp"))
st_read(here::here("week-12", "data", "Knoxville-Knox_County_Zoning"))
st_read(here::here("week-12", "data", "Knoxville-Knox_County_Zoning.shp"))
knox_dat <-
st_read(here::here("week-12", "data", "Knoxville-Knox_County_Zoning.shp"))
ggplot(data = knox_dat) %>%
geom_sf()
ggplot(data = knox_dat) +
geom_sf()
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2
library(tidyverse)
library(readxl)
library(tigris)
# Chunk 3
dir <- read_excel('week-12/data/schl_directory_2017-18.xlsx')
edu <- read_excel('week-12/data/data_2017_educator_race_ethnicity_by_district.xlsx')
# Chunk 4
edu2 <-
left_join(edu, dir %>% select(LEA_ID, LEA_NCES) %>% drop_na() %>% distinct(), join_by(`District Number` == LEA_ID))
# Chunk 5
tn_districts <- school_districts("Tennessee")
# Chunk 6
tn_data <-
left_join(tn_districts, edu2 %>% mutate(LEA_NCES = as.character(LEA_NCES)), join_by(GEOID == LEA_NCES))
# Chunk 7
ggplot(data = tn_data) +
geom_sf(aes(fill = White))
# Chunk 8
tn_data_pivot <-
tn_data %>%
pivot_longer(cols = `American Indian or Alaska Native`:`Unidentified`)
View(tn_data_pivot)
View(tn_data_pivot)
ggplot(data = tn_data_pivot %>% filter(name %in% ("White", "Black or African American
ggplot(data = tn_data_pivot %>% filter(name %in% ("White", "Black or African American"))) +
ggplot(data = tn_data_pivot %>% filter(name %in% ("White", "Black or African American"))) +
ggplot(data = tn_data_pivot %>% filter(name %in% c("White", "Black or African American"))) +
geom_sf(aes(fill = value)) +
facet_wrap(~ name)
ggplot(data = tn_data_pivot %>% filter(name %in% c("White", "Black or African American"))) +
geom_sf(aes(fill = value))
tn_data_pivot %>% filter(name %in% c("White", "Black or African American")) -> b
ggplot(data = tn_data_pivot %>% filter(name %in% c("White", "Black or African American"))) +
geom_sf(aes(fill = value)) +
facet_wrap(~ name)
View(dir)
View(dir)
View(edu2)
View(tn_data)
ggplot(data = tn_data %>% filter(`Staff Type` == "Teachers")) +
geom_sf(aes(fill = White))
View(tn_data)
View(tn_data)
ggplot(data = tn_data %>% filter(`Staff Type` == "Teacher")) +
geom_sf(aes(fill = White))
20+2+4+4
