y = latitude,
color = common_name),
alpha = 0.3,
size = 0.1,
show.legend = FALSE) +
coord_fixed(1.3) +
labs(title = "Bears around the world") +
theme_minimal() +
scale_fill_viridis(option = "magma")
ggplot(data = bear_map) +
geom_map(map = bear_map,
aes(x = long,
y = lat,
fill = n_bears,
map_id = region),
linewidth = 0.1,
color = "white") +
geom_point(data = bear_dat,
aes(x = longitude,
y = latitude,
color = common_name),
alpha = 0.3,
size = 0.1) +
coord_fixed(1.3) +
labs(title = "Bears around the world") +
theme_minimal() +
scale_fill_viridis(option = "magma") +
theme(legend.position = "none")
bear_dat <-
read_csv(here::here("week-11", "data", "bears.csv"))
library(tidyverse)
library(maps)
bear_dat <-
read_csv(here::here("week-11", "data", "bears.csv"))
View(bear_dat)
usethis::git_vaccinate()
bear_dat2 <- bear_dat %>% select(common_name, place_country_name, latitude, longitude, observed_on)
View(bear_dat2)
bear_dat2 <- bear_dat2 %>% drop_na()
write_csv(bear_dat2, file.choose())
library(tidyverse)
library(maps)
bear_dat <-
read_csv(here::here("week-11", "data", "bears.csv"))
View(bear_dat)
usethis::git_vaccinate()
bear_dat2 <- bear_dat %>% select(common_name, place_country_name, latitude, longitude, observed_on)
View(bear_dat2)
bear_dat2 <- bear_dat2 %>% drop_na()
bear_dat3 <- bear_dat2 %>% group_by(place_country_name) %>% summarize(n_bears = n())
View(bear_dat3)
file.choose()
write_csv(bear_dat3, "/Users/ivelasq/Python/bear-sightings/bears_agg.csv")
usethis::git_vaccinate()
usethis::edit_r_environ()
Sys.setenv(CENSUS_KEY = "5a7f224123bfe155d63847c278ec63af03dc1165")
usethis::edit_r_environ()
Sys.setenv(CENSUS_KEY = "5a7f224123bfe155d63847c278ec63af03dc1165")
usethis::edit_r_environ()
Sys.getenv("CENSUS_KEY")
library(tidycensus)
census_api_key(Sys.getenv("CENSUS_KEY"), install = TRUE)
v16 <- load_variables(2016, "acs5", cache = TRUE)
library(tidycensus)
v16 <- load_variables(2016, "acs5", cache = TRUE)
View(v16)
```r
v16 <- load_variables(2016, "acs1", cache = TRUE)
View(v16)
```r
v16 <- load_variables(2016, "sf1", cache = TRUE)
v16 <- load_variables(2010, "sf1", cache = TRUE)
View(v16)
v16 <- load_variables(2016, "acs5", cache = TRUE)
View(v16)
table(v16$geography)
View(v16)
View(v16)
v16 <- load_variables(2016, "sf1", cache = TRUE) %>%
filter(geography == "state")
library(tidyverse)
View(v16)
v16 <- load_variables(2016, "sf1", cache = TRUE) %>%
filter(geography == "state")
v16 <- load_variables(2016, "acs5", cache = TRUE) %>%
filter(geography == "state")
View(v16)
get_acs(geograph = "school district (unified)")
get_acs(geography = "school district (unified)")
v16 <- load_variables(2016, "acs5/profile", cache = TRUE)
View(v16)
usethis::edit_r_environ()
View(v16)
View(v16)
pct_with_bb <-
get_acs(
geography = "school district (unified)",
variables = "DP02_0152P",
state = "TN",
geometry = TRUE
)
View(pct_with_bb)
ggplot(data = pct_with_bb,
aes(fill = estimate)) +
geom_sf()
library(sf)
nc <- st_read(system.file("shape/nc.shp", package = "sf"))
class(nc)
head(nc)
head(st_geometry(nc[1, ])[[1]][[1]])
plot(st_geometry(nc[1, ]))
??st_read
ggplot(data = nc) +
geom_sf()
#| echo: true
ggplot(data = nc) +
geom_sf() +
theme_void()
#| echo: true
ggplot(data = nc) +
geom_sf(fill = "blue",
border = "white") +
theme_void()
#| echo: true
ggplot(data = nc) +
geom_sf(fill = "blue",
color = "white") +
theme_void()
#| echo: true
ggplot(data = nc) +
geom_sf(fill = "#0C1337",
color = "white") +
theme_void()
library(tigris)
library(tigris)
??school_districts()
schools <- school_districts("Tennessee")
ggplot(tn_schools) +
geom_sf()
tn_schools <- school_districts("Tennessee")
ggplot(tn_schools) +
geom_sf()
class(tn_schools)
tn_schools
View(tn_schools)
data <- get_education_data(level = "school-districts",
source = "ccd",
topic = "finance",
filters = list(year = 2018,
fips = 47))
library(educationdata)
data <- get_education_data(level = "school-districts",
source = "ccd",
topic = "finance",
filters = list(year = 2018,
fips = 47))
View(data)
tn_districts <- school_districts("Tennessee")
class(tn_districts)
View(tn_districts)
View(tn_districts)
edu_data <- get_education_data(level = "school-districts",
source = "ccd",
topic = "finance",
filters = list(year = 2018,
fips = 47))
View(edu_data)
tn_data <-
left_join(tn_districts, edu_data, join_by(GEOID == leaid))
View(tn_data)
View(tn_data)
colnames(tn_data)
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch))
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch),
color = "white") %>%
theme_void() +
labs(title = "State revenue for school lunch programs")
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch),
color = "white") %>%
theme_void() +
labs(title = "State revenue for school lunch programs")
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch),
color = "white") +
theme_void() +
labs(title = "State revenue for school lunch programs")
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch),
color = "white") +
theme_void() +
labs(title = "State revenue for school lunch programs",
fill = "Revenue")
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch),
color = "white") +
theme_void() +
labs(title = "State revenue for school lunch programs",
fill = "Revenue") +
scale_fill_continuous(labels = dollar)
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch),
color = "white") +
theme_void() +
labs(title = "State revenue for school lunch programs",
fill = "Revenue") +
scale_fill_continuous(labels = dollars)
#| echo: true
ggplot(data = tn_data) +
geom_sf(aes(fill = rev_state_sch_lunch),
color = "white") +
theme_void() +
labs(title = "State revenue for school lunch programs",
fill = "Revenue") +
scale_fill_continuous(labels = scales::dollar)
st_read(here::here("data", "Knoxville-Knox_County_Zoning.shp"))
st_read(here::here("week-12", "data", "Knoxville-Knox_County_Zoning.shp"))
st_read(here::here("week-12", "data", "Knoxville-Knox_County_Zoning.shp"))
st_read(here::here("week-12", "data", "Knoxville-Knox_County_Zoning"))
st_read(here::here("week-12", "data", "Knoxville-Knox_County_Zoning.shp"))
knox_dat <-
st_read(here::here("week-12", "data", "Knoxville-Knox_County_Zoning.shp"))
ggplot(data = knox_dat) %>%
geom_sf()
ggplot(data = knox_dat) +
geom_sf()
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2
library(tidyverse)
library(readxl)
library(tigris)
# Chunk 3
dir <- read_excel('week-12/data/schl_directory_2017-18.xlsx')
edu <- read_excel('week-12/data/data_2017_educator_race_ethnicity_by_district.xlsx')
# Chunk 4
edu2 <-
left_join(edu, dir %>% select(LEA_ID, LEA_NCES) %>% drop_na() %>% distinct(), join_by(`District Number` == LEA_ID))
# Chunk 5
tn_districts <- school_districts("Tennessee")
# Chunk 6
tn_data <-
left_join(tn_districts, edu2 %>% mutate(LEA_NCES = as.character(LEA_NCES)), join_by(GEOID == LEA_NCES))
# Chunk 7
ggplot(data = tn_data) +
geom_sf(aes(fill = White))
# Chunk 8
tn_data_pivot <-
tn_data %>%
pivot_longer(cols = `American Indian or Alaska Native`:`Unidentified`)
View(tn_data_pivot)
View(tn_data_pivot)
ggplot(data = tn_data_pivot %>% filter(name %in% ("White", "Black or African American
ggplot(data = tn_data_pivot %>% filter(name %in% ("White", "Black or African American"))) +
ggplot(data = tn_data_pivot %>% filter(name %in% ("White", "Black or African American"))) +
ggplot(data = tn_data_pivot %>% filter(name %in% c("White", "Black or African American"))) +
geom_sf(aes(fill = value)) +
facet_wrap(~ name)
ggplot(data = tn_data_pivot %>% filter(name %in% c("White", "Black or African American"))) +
geom_sf(aes(fill = value))
tn_data_pivot %>% filter(name %in% c("White", "Black or African American")) -> b
ggplot(data = tn_data_pivot %>% filter(name %in% c("White", "Black or African American"))) +
geom_sf(aes(fill = value)) +
facet_wrap(~ name)
View(dir)
View(dir)
View(edu2)
View(tn_data)
ggplot(data = tn_data %>% filter(`Staff Type` == "Teachers")) +
geom_sf(aes(fill = White))
View(tn_data)
View(tn_data)
ggplot(data = tn_data %>% filter(`Staff Type` == "Teacher")) +
geom_sf(aes(fill = White))
20+2+4+4
library(stringr)
dat <- data.frame(text = c("   Hello  ", "   World   "))
dat %>% str_trim(text)
dat
dat %>% str_trim(text)
rlang::last_trace()
dat <- data.frame(txt = c("   Hello  ", "   World   "))
dat %>% str_trim(txt)
dat
??str_trim
R
dat <- as_tibble(txt = c("   Hello  ", "   World   "))
library(tidyverse)
dat <- as_tibble(txt = c("   Hello  ", "   World   "))
dat <- tibble(txt = c("   Hello  ", "   World   "))
dat %>% str_trim(txt)
View(dat)
dat %>% mutate(clean_txt = str_trim(txt))
dat %>% mutate(clean_txt = str_to_lower(txt))
dat <- tibble(txt = c("Tennessee", "tennessee"))
dat %>% mutate(clean_txt = str_to_lower(txt))
dat <- tibble(text = c("I like apples", "Apples are tasty"))
dat %>% mutate(clean_txt = str_replace_all(data$text, "apple", "banana"))
dat %>% mutate(clean_txt = str_replace_all(text, "apple", "banana"))
dat %>% mutate(clean_txt = str_replace_all(txt, "apple", "banana"))
dat <- tibble(txt = c("I like apples", "Apples are tasty"))
dat %>% mutate(clean_txt = str_replace_all(txt, "apple", "banana"))
dat <- tibble(txt = c("Contact me at user@example.com", "Email us at support@email.com"))
dat %>% mutate(emails = str_extract(txt, "\\S+@\\S+"))
# Chunk 1: setup
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
# Chunk 2
# then load all the relevant packages
pacman::p_load(pacman, knitr, tidyverse, readxl)
# Chunk 3: xaringanExtra-clipboard
# these allow any code snippets to be copied to the clipboard so they
# can be pasted easily
htmltools::tagList(
xaringanExtra::use_clipboard(
button_text = "<i class=\"fa fa-clipboard\"></i>",
success_text = "<i class=\"fa fa-check\" style=\"color: #90BE6D\"></i>",
),
rmarkdown::html_dependency_font_awesome()
)
# Chunk 4: xaringan-panelset
xaringanExtra::use_panelset()
# Chunk 5
#| echo: false
#| out.width: 60%
#| fig-align: center
knitr::include_graphics("~/R/f23-founds-eds/week-12/knox.png")
# Chunk 6
#| echo: false
#| out.width: 60%
#| fig-align: center
knitr::include_graphics("https://stringr.tidyverse.org/logo.png")
# Chunk 7
library(stringr)
dat <- tibble(txt = c("   Hello  ", "   World   "))
dat %>% mutate(clean_txt = str_trim(txt))
# Chunk 8
dat <- tibble(txt = c("Tennessee", "tennessee"))
dat %>% mutate(clean_txt = str_to_lower(txt))
# Chunk 9
dat <- tibble(txt = c("I like apples", "Apples are tasty"))
dat %>% mutate(clean_txt = str_replace_all(txt, "apple", "banana"))
# Chunk 10
dat <- tibble(txt = c("Contact me at user@example.com", "Email us at support@email.com"))
dat %>% mutate(emails = str_extract(txt, "\\S+@\\S+"))
# Chunk 11
# install.packages("sf")
library(sf)
# Chunk 12
#| echo: true
#--- a dataset that comes with the sf package ---#
nc <- st_read(system.file("shape/nc.shp", package = "sf"))
# Chunk 13
#| echo: true
class(nc)
# Chunk 14
#| echo: true
head(nc)
# Chunk 15
#| echo: true
st_geometry(nc[1, ])[[1]][[1]]
# Chunk 16
#| echo: true
plot(st_geometry(nc[1, ]))
# Chunk 17
#| echo: true
#| eval: false
ggplot(data = nc) +
geom_sf()
# Chunk 18
#| echo: false
#| eval: true
ggplot(data = nc) +
geom_sf()
# Chunk 19
#| echo: true
#| eval: false
library(ggplot2)
ggplot(data = nc) +
geom_sf(fill = "#0C1337",
color = "white") +
theme_void()
# Chunk 20
#| echo: false
#| eval: true
library(ggplot2)
ggplot(data = nc) +
geom_sf(fill = "#0C1337",
color = "white") +
theme_void()
# Chunk 21
#| echo: true
#| eval: false
library(tigris)
tn_districts <- school_districts("Tennessee")
# Chunk 22
#| include: false
library(tigris)
tn_districts <- school_districts("Tennessee")
# Chunk 23
#| echo: true
class(tn_districts)
# Chunk 24
#| echo: true
tn_districts
# Chunk 25
#| echo: true
ggplot(tn_districts) +
geom_sf()
# Chunk 26
#| echo: false
#| out.width: 60%
#| fig-align: center
knitr::include_graphics("~/R/f23-founds-eds/week-12/knox.png")
# Chunk 27
#| echo: false
#| out.width: 60%
#| fig-align: center
knitr::include_graphics("~/R/f23-founds-eds/week-12/files.png")
# Chunk 28
#| echo: true
knox_zones <-
st_read(dsn = here::here("week-12", "shapefiles"),
"Knoxville-Knox_County_Zoning")
# Chunk 29
#| echo: true
#| eval: false
ggplot(data = knox_zones) +
geom_sf()
# Chunk 30
#| echo: false
#| eval: true
ggplot(data = knox_zones) +
geom_sf()
# Chunk 31
#| echo: true
library(educationdata)
library(dplyr)
library(tidyr)
library(tigris)
library(ggplot2)
edu_data <- get_education_data(level = "school-districts",
source = "ccd",
topic = "finance",
filters = list(year = 2018,
fips = 47))
# Chunk 32
#| echo: true
tn_districts <- school_districts("Tennessee")
tn_data <-
left_join(tn_districts, edu_data, join_by(GEOID == leaid))
# Chunk 33
#| echo: true
#| eval: false
ggplot(data = tn_data) +
geom_sf(aes(fill = salaries_total))
# Chunk 34
#| echo: false
#| eval: true
#| dpi: 300
ggplot(data = tn_data) +
geom_sf(aes(fill = salaries_total))
# Chunk 35
salaries_total_by_enrollment <-
tn_data %>%
mutate(salary_by_enrollment = salaries_total/enrollment_fall_school)
scale_fill_continuous(labels = scales::dollar)
#| echo: true
#| eval: false
ggplot(data = salaries_total_by_enrollment) +
geom_sf(aes(fill = salary_by_enrollment),
color = "white") +
theme_void() +
labs(title = "Total salary amount",
fill = "Revenue") +
scale_fill_continuous(labels = scales::dollar)
#| echo: false
#| dpi: 300
#| eval: true
ggplot(data = salaries_total_by_enrollment) +
data <- tibble(name = c("Alice", "Bob", "Alice", "Charlie"),
age = c(25, 30, 25, 28))
dat <- tibble(name = c("Alice", "Bob", "Alice", "Charlie"),
age = c(25, 30, 25, 28))
unique_data <- distinct(dat)
distinct(dat)
dat <- tibble(name = c("Alice", "Bob", NA, "Charlie"),
age = c(25, NA, 30, 28))
drop_na(data)
drop_na(dat)
dat <- tibble(name = c("Alice", "Bob", NA, "Charlie"),
age = c(25, NA, 30, 28))
dat %>% mutate(age = replace_na(age, 0))
dat %>%
mutate(grade = case_when(score >= 90 ~ "A",
score >= 80 ~ "B",
score >= 70 ~ "C",
TRUE ~ "D"))
dat <- tibble(score = c(85, 72, 95, 60, 78))
dat %>%
mutate(grade = case_when(score >= 90 ~ "A",
score >= 80 ~ "B",
score >= 70 ~ "C",
TRUE ~ "D"))
