---
title: "Week 4 Slides"
subtitle: "What's all the fuss about data science? Doing things we could not easily do without coding"
author: "**Isabella Velásquez and Maryrose Weatherton**"
date: '`r format(Sys.time(), "%B %d, %Y")`'
output: xaringan::moon_reader
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
```

```{r, echo=FALSE}
# then load all the relevant packages
pacman::p_load(pacman, knitr, tidyverse, readxl)
```

```{r xaringanExtra-clipboard, echo=FALSE}
# these allow any code snippets to be copied to the clipboard so they 
# can be pasted easily
htmltools::tagList(
    xaringanExtra::use_clipboard(
        button_text = "<i class=\"fa fa-clipboard\"></i>",
        success_text = "<i class=\"fa fa-check\" style=\"color: #90BE6D\"></i>",
    ),
    rmarkdown::html_dependency_font_awesome()
)
```

```{r xaringan-panelset, echo=FALSE}
xaringanExtra::use_panelset()
```


# Purpose and Agenda

What's so useful about coding? That question is the focus of this class. We'll focus on _joining_ two data sets, something that is relatively straightforward to do in R. We'll again use the NAEP data, joining data on spending on kids to understand whether there are any clear relations between spending and academic achievement.

## What we'll do in this presentation

- Discussion
- Key Concept: Joining
- Key Concept: Doing more with ggplot2
- Code-along and data
- What's next: Assignment(s) and Readings

---

# Discussion

.panelset[

.panel[.panel-name[Background]

- Often, the data we want to analyze are in multiple files (e.g., CSV, or Excel files) or databases (e.g., a SQL database)
- The _key_ to combining data is to ensure that the data we are joining share a common . . . _key_!

]

.panel[.panel-name[Discussion Question]

- What are some use cases for your research (past or planned) that involve multiple data files? And, why might it be important to join those files together? Please be as specific as possible regarding these reasons why.

]

]

---

# Reading Recap

Substantive reading(s):

> Worsley, M., Martinez -Maldonado, R., & D'Angelo, C. (2021). A New Era in Multimodal Learning Analytics: Twelve Core Commitments to Ground and Grow MMLA. *Journal of Learning Analytics, 8*(3), 10-27.

Technical reading(s):

> R for Data Science, Joins: https://r4ds.hadley.nz/joins.html

> Joining data with dplyr: https://hollyemblem.medium.com/joining-data-with-dplyr-in-r-874698eb8898

???

Share some notes from the discussion here

---

# Key Concept: Joins

.panelset[

.panel[.panel-name[two data frames]
**Working with Two Data Frames**: 
- The join functions in `dplyr` work with two data frames.
- **Data frames**: Tabular structures in R with rows and columns.
- Can be thought of as results from loading two distinct files into R.

```{r, eval=FALSE}
my_first_data_frame <- read_csv("dataset-1.csv")
my_second_data_frame <- read_csv("dataset-2.csv")
```

]

.panel[.panel-name[types of dplyr joins]
**Types of `dplyr` Joins**:
- **Inner Join**: Returns only rows that have matching values in both data frames.
- **Left Join**: Returns all rows from the left data frame, and the matched rows from the right data frame.
- **Right Join**: Opposite of left join.
- **Full Join**: Returns all rows when there is a match in either the left or right data frame.

There are also two filtering joins that we won't discuss further at this time: `anti_join()` and `semi_join()`

]

.panel[.panel-name[how to]
**How to Use `dplyr` Joins**:

Example using `left_join`:

```{r, eval=FALSE}
joined_data <- left_join(my_first_data_frame, my_second_data_frame, by = "key_column")
```

- `left_join()` is perhaps the most common function
- The `by` argument specifies which column(s) to use for joining.

]

.panel[.panel-name[other details]
**Other Important Details**:
- If the key columns have different names in each data frame, use the syntax `by = column_in_first == column_in_second)`.
- Beware of duplicate rows: Ensure that the key column(s) uniquely identify rows, or you may get unintended repeats.
- If joining by multiple columns, provide them as a vector, e.g., `by = c("col1", "col2")`.

]

]

---

# Key Concept: More EDA with ggplot2

.panelset[

.panel[.panel-name[geom_point()]
**geom_point()**: 
- Used for creating scatterplots.
- Great for visualizing relationships between two numeric variables.

Example:
```{r, eval=FALSE, echo = TRUE}
ggplot(data = mtcars, aes(x = mpg, y = wt)) +
  geom_point()
```

]

.panel[.panel-name[points' colors]
**Changing Points' Colors**:
- Colors can provide additional information about data points.
- Use the `color` aesthetic in `aes()` to assign colors based on a variable.

Example:
```{r, eval=FALSE, echo = TRUE}
ggplot(data = mtcars, aes(x = mpg, y = wt, color = cyl)) +
  geom_point()
```
]

.panel[.panel-name[geom_smooth()]
**geom_smooth()**: 
- Adds a smoothed line to the plot.
- Useful for spotting trends or patterns in scatterplots.
- Can also add a straight regression line with `method = "lm"`.

Example:
```{r, eval=FALSE, echo = TRUE}
ggplot(data = mtcars, aes(x = mpg, y = wt)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE)
```

]

.panel[.panel-name[themes]
**Themes in ggplot2**:
- Themes control the appearance of the plot.
- They dictate elements like background color, gridlines, and font sizes.
- `ggplot2` has several built-in themes, e.g., `theme_minimal()`, `theme_dark()`, and `theme_bw()`
- other packages (e.g., [ggthemes](https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/)) add _many_ more themes

Example:
```{r, eval=FALSE, echo = TRUE}
ggplot(data = mtcars, aes(x = mpg, y = wt)) +
  geom_point() +
  theme_minimal()
```
]

.panel[.panel-name[labels]
**Adding Labels**:
- Provide context and clarity to your plots.
- Functions like `labs()`, `xlab()`, `ylab()`, and `ggtitle()` allow for adding or modifying labels.

Example:
```{r, eval=FALSE, echo = TRUE}
ggplot(data = mtcars, aes(x = mpg, y = wt)) +
  geom_point() +
  labs(title = "MPG vs. Weight", x = "Miles per Gallon", y = "Weight (1000s lbs)")
```

]



]

---

# Code-along

*Let's code-along together in an `.R` file.*

.panelset[

.panel[.panel-name[left_join()]

```{r, eval = FALSE, echo = TRUE}
band_members %>% left_join(band_instruments, by = "name")
# also try right_join!
```

]

.panel[.panel-name[full_join()]

```{r, eval = FALSE, echo = TRUE}
band_members %>% full_join(band_instruments,  by = "name")
# also try semi_join()!
```

]

.panel[.panel-name[different keys]

```{r, eval = FALSE, echo = TRUE}
band_members
band_instruments2

band_members %>% full_join(band_instruments2, by = join_by(name == artist))
```

]

.panel[.panel-name[multiple keys]

```{r, eval = FALSE, echo = TRUE}
band_members
# what if the Paul in Paul instruments is from another band?
band_instruments <- band_instruments %>% mutate(band = c("Beatles", "Porcupines", "Stones")) 
# we can then join on both name *and* band
band_members %>% left_join(band_instruments, by = c("name", "band"))
```

]

]

???

May want to demonstate some of the new ggplot2 code, too (geom_smooth, maybe?)

---

# What's next?

.panelset[


.panel[.panel-name[Weekly Assignment]

- We'll be joining together two files and conducting an authentic analysis about what relates to student academic achievement
- The analysis will take the form of a scatterplot with a fitted line --- effectively, a visual represention of a simple (one variable) linear regression model

]

.panel[.panel-name[Data]

- We'll again be using NAEP data
- In addition, we'l be using data on state-by-state spending on children; read about the data [here](https://jrosen48.github.io/tidykids/articles/tidykids-codebook.html)

]

.panel[.panel-name[Substantive Reading(s)]

- Substantive reading(s) for the week ahead:

> Reich, J. (2022). Learning analytics and learning at scale. Lang, C., Siemens, G. Wise, AF, Gašević, D., Merceron, A.,(eds.) Handbook of Learning Analytics, 2nd ed. Vancouver, Canada: SOLAR.

> White, R. S. (2023). Ceilings Made of Glass and Leaving En Masse? Examining Superintendent Gender Gaps and Turnover Over Time Across the United States. Educational Researcher, 0013189X231163139.

Linked in Canvas.

]

.panel[.panel-name[Technical Reading(s)]

- Technical reading(s) for the week ahead:

> Introducing educationdata, https://urbaninstitute.github.io/education-data-package-r/articles/introducing-educationdata.html (also, check out other pages on this website)

Also linked in Canvas.

]

]