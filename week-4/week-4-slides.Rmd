---
title: "Week 4 Slides"
subtitle: "What's all the fuss about data science? Doing things we could not easily do without coding"
author: "**Isabella Velásquez and Maryrose Weatherton**"
date: '`r format(Sys.time(), "%B %d, %Y")`'
output: xaringan::moon_reader
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
```

```{r, echo=FALSE}
# then load all the relevant packages
pacman::p_load(pacman, knitr, tidyverse, readxl)
```

```{r xaringanExtra-clipboard, echo=FALSE}
# these allow any code snippets to be copied to the clipboard so they 
# can be pasted easily
htmltools::tagList(
    xaringanExtra::use_clipboard(
        button_text = "<i class=\"fa fa-clipboard\"></i>",
        success_text = "<i class=\"fa fa-check\" style=\"color: #90BE6D\"></i>",
    ),
    rmarkdown::html_dependency_font_awesome()
)
```

```{r xaringan-panelset, echo=FALSE}
xaringanExtra::use_panelset()
```


# Purpose and Agenda

What's so useful about coding? That question is the focus of this class.


## What we'll do in this presentation

- Discussion
- Course Logistics
- Key Concept: ggplot2 and advanced graphics
- Key Concept: Revisiting the Core Skills Framework
- Code-along and data
- What's next: Assignment(s) and Readings

---

# Discussion

.panelset[

.panel[.panel-name[Background]

Data visualizations can be used to communicate with a range of audiences, including _readers_ (or interpreters) of your visualizations and you and your collaborators as you seak to understand your data.

]

.panel[.panel-name[Discussion Question]

- What is easy or straightforward to do regarding visualizing data with Microsoft Excel or Google Sheets?
- What is more challenging to do with these tools?

]

]

???

This discussion can serve as an opening to discussing what ggplot2's strengths are relative to the above two tools.

---

# Reading Recap

> Lang, C., Wise, A. F., Merceron, A., Gasevic, D., & Siemens, G. (2022). What is learning analytics. The handbook of learning analytics, 8-18.

This was meant to introduce you to perhaps the most prominent data science adjacent field in education, the learning analytics community. The SOLAR community and LAK conference support learning analytics researchers. 

Additionally, there were two technical readings:

> [R for Data Science: Chapter 2 - Data Visualization](https://r4ds.hadley.nz/data-visualize.html)



> [Data Visualization Introduction from Modern Dive](https://moderndive.com/2-viz.html#viz)

???

As in the first week, it may be good to pull out and summarize highlights from students' discussion posts here.

---

# Course Logistics

We're now two weeks into class! What has gone well? What issues have you had? What questions do you have?

Syllabus: https://rpubs.com/jmichaelrosenberg/stem-680-fall-2023-syllabus

And the weekly schedule: https://docs.google.com/document/d/1cUrX_bpHFNdqvSZU_cw0mwEWuz_3m2Sn7TjIVILAv_E/edit

???

May be a chance to return to the syllabus and schedule and answer any questions that have arisen.

---

.title[Key Concept: ggplot2]

.panelset[

.panel[.panel-name[ggplot2]
**ggplot2**: 
- An R package for data visualization
- Based on the *Grammar of Graphics*
- Created by Hadley Wickham
- Part of the `tidyverse`, a suite of R packages for data science

]

.panel[.panel-name[the grammar of graphics]
**The Grammar of Graphics**:
- A systematic way to describe and build graphs
- Focuses on layers of visualizations
- Elements include:
  - **Data**: What you want to plot
  - **Aesthetics**: How data is mapped to visuals
  - **Geoms**: Geometric objects like points, lines, bars
  - **Stats**: Statistical transformations, e.g., smoothing
  - **Facets**: Ways to split data into subsets for multiple plots

]

.panel[.panel-name[Example ggplot2 code]
**Example ggplot2 code**:

```{r, }
library(tidyverse) # note, this loads the ggplot2 package

ggplot(data = mtcars, aes(x = mpg, y = wt)) +
  geom_point(aes(color = cyl)) +
  labs(title = "MPG vs. Weight", 
       x = "Miles per Gallon", 
       y = "Weight (in 1000s of lbs)",
       color = "Number of Cylinders")
```

]
]

---

# Key Concept: Revisiting the Core Skills Framework

*Let's quickly revisit the core skills we discussed last week*

.panelset[

.panel[.panel-name[Data]
**Data** in R

We have focused on these two data structures, though others you will encounter later on include vectors, matrices, and lists:

- **Data Frames**: Tabular data, can mix different types
- **Tibbles**: Modern version of data frames (from the tidyverse)

]

.panel[.panel-name[Packages]
**Packages** in R
Packages are collections of functions and datasets that extend R:

- You have used tidyverse, skimr, and janitor so far
- This week, we're focusing on ggplot2
- We'll use many others throughout the semester
- You might start exploring packages related to interests you have now! There are tens of thousands to do nearly anything with data (and order pizza, too; seriously!)

]

.panel[.panel-name[Functions]
**Functions** in R
Functions are made up of code that perform specific tasks:
- Can be built-in (e.g., `mean()`, `sum()`) or loaded from a package (e.g., `glimpse()`)
- You can write your own function! We'll discuss this at another point in this class

]

.panel[.panel-name[Projects and File Paths]
**Projects and File Paths** in RStudio
Projects help organize your work:
- Keep related scripts, data, and outputs together
- We *always* work in projects in this class

]

]

*Again, these core skills will be the basis of all of our analyses in R.*

---

# Code-along

*Let's code-along together in an `.R` we'll use---just like we did last week*

.panelset[

.panel[.panel-name[ggplot()]

- we use `ggplot()` to start our plotting of the built-in `penguins` dataset from the palmerpenguins package

```{r, eval = FALSE, echo = TRUE}
library(tidyverse) # let's load the tidyverse, loading ggplot2 & other packages
library(palmerpenguins) # make sure to install with install.packages() first

ggplot(penguins)
```

*This won't do... much (yet!)*

]

.panel[.panel-name[aes()]

- add on to our initial code by specifying the _aesthetic mapping_ with `aes()`
- specfically, let's tell R what the *x* variable is - let's pick _any_ numeric variable from the data set

```{r, eval = FALSE, echo = TRUE}
glimpse(penguins) # to see which variables are numeric

ggplot(penguins, aes(x = body_mass_g) # can change to another!
```

**Still not doing much!**

]

.panel[.panel-name[geom_histogram]

- Last, specify the geometric object you want to use to represent the variable you mapped to an aesthetic
- Let's try a histogram!
- We always add *layers* onto ggplot2 plots with the `+` operator

```{r, eval = FALSE, echo = TRUE}
ggplot(penguins, aes(x = body_mass_g) +
           geom_histogram()
```

*Voilà!*

]

.panel[.panel-name[geom_point]

- Let's expand on what we've done by examining _two_ variables, one we "map" to *x*, another to *y*
- We'll see how the bill length and depth of penguins relate, using a different geom to do so with a scatterplot

```{r, eval = FALSE, echo = TRUE}
ggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm) +
           geom_point()
```

*Voilà (take two)!*

]

.panel[.panel-name[A 3rd variable]

- Part of the joy of ggplot2 is the flexibility you have in how you can modify a plot
- What if we want to visualize a third variable? 
    - We have several aesthetic features we can "map" this third variable to, including the size, shape, and color of points

```{r, eval = FALSE, echo = TRUE}
ggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm, color = species) +
           geom_point()
```

*Voilà (take three)!*

]

.panel[.panel-name[More additions]

- The sky is the limit! 
- We can also add other geoms to our plot, like one representing the _slope_ of the relation between *x* and *y*
- Furthermore, we can easily _theme_ out plot

```{r, eval = FALSE, echo = TRUE}
ggplot(penguins, aes(x = bill_length_mm, y = bill_depth_mm, color = species)) +
           geom_point() +
           geom_smooth(method = "lm") +
    theme_bw()
```

]

]

---

# What's next?

.panelset[


.panel[.panel-name[Weekly Assignment]

- We'll be doing more with ggplot2 in this lab, while returning back to some of the functions we used last week
- We'll be faceting our plots using a _layer_ we can add, `facet_wrap()`

]

.panel[.panel-name[Data]

- We'll be using a large, complex dataset from the United States Department of Education
- Specifically, we'll use data from the [Elementary/Secondary Information System (ElSi)](https://nces.ed.gov/ccd/elsi/), a data collection system that includes information on the more than 100,000 schools and more than 8,000 school districts in the country
- Note: Even though this data is alrge and complex, it is _not_ cleaned, and one slightly unusual thing we'll need to do is _skip_ the first six rows of the CSV file accessed through the ElSi, because they're blank!

]

.panel[.panel-name[Substantive Reading(s)]

- Substantive reading(s) for the week ahead:

> Reich, J. (2022). Learning analytics and learning at scale. Lang, C., Siemens, G. Wise, AF, Gašević, D., Merceron, A.,(eds.) Handbook of Learning Analytics, 2nd ed. Vancouver, Canada: SOLAR.
> White, R. S. (2023). What's in a first name?: America's K-12 public school district sup erintendent gender gap. Leadership and Policy in Schools, 22(2), 385-401.

Linked in Canvas.

]

.panel[.panel-name[Technical Reading(s)]

- Technical reading(s) for the week ahead:

> R for Data Science, Chapter 8: https://r4ds.hadley.nz/data-import

> Cleaning names with Janitor: https://bookdown.org/aschmi11/RESMHandbook/data-preparation-and-cleaning-in-r.html#cleaning-names-with-janitor

Also linked in Canvas.

]

]