---
title: "Week 14 Slides"
subtitle: "Topic Modeling"
author: "**Isabella Velásquez and Maryrose Weatherton**"
date: '`r format(Sys.time(), "%B %d, %Y")`'
output: xaringan::moon_reader
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
```

```{r, echo=FALSE}
# then load all the relevant packages
pacman::p_load(pacman, knitr, tidyverse, readxl)
```

```{r xaringanExtra-clipboard, echo=FALSE}
# these allow any code snippets to be copied to the clipboard so they 
# can be pasted easily
htmltools::tagList(
    xaringanExtra::use_clipboard(
        button_text = "<i class=\"fa fa-clipboard\"></i>",
        success_text = "<i class=\"fa fa-check\" style=\"color: #90BE6D\"></i>",
    ),
    rmarkdown::html_dependency_font_awesome()
)
```

```{r xaringan-panelset, echo=FALSE}
xaringanExtra::use_panelset()
```


# Purpose and Agenda

This week, we'll continue our exploration of text analysis specifically with topic modeling. Topic modeling is a method for unsupervised classification of such documents, similar to clustering on numeric data, which finds natural groups of items even when we’re not sure what we’re looking for.

## What we'll do in this presentation

- Discussion
- Key Concept: topic modeling
- Code-along and data
- Discussion
- What's next: Assignment(s) and Readings

---

# Discussion

.panelset[

.panel[.panel-name[Background]

- What is topic modeling?

]

.panel[.panel-name[Discussion Question]

- Value of topic modeling?

]

]


---

# Optional Reading Recap

Optional Substantive reading(s):

> 

Technical Reading(s):

> 

]

---

# Key Concept: topic modeling

.panelset[

.panel[.panel-name[Latent Dirichlet allocation]

- Latent Dirichlet allocation (LDA) is a method for fitting a topic model.
- Each document is a mixture of topics and each topic is a mixture of words
- Words can be shared between topics
]


.panel[.panel-name[*other information? example?*]

**fill in text**:



]


]

---

# Code-along

.panelset[

.panel[.panel-name[Loading package and data]

- Let's start by examining topics from the AssociatedPress dataset. It is included with the topicmodels package.
- First, install and load the topicmodels package. Then, load the AssociatedPress dataset.

```{r, echo = TRUE, eval = FALSE}
install.packages("topicmodels")
library(topicmodels)

data("AssociatedPress")
```

]

.panel[.panel-name[LDA()]

- Let's set the number of topics we want with the LDA() function
- `k` is the number of topics we want to find
- We use the code `control = list(seed = 1234)` to set a seed so that the output of the model is predictable

```{r, echo = TRUE, eval = FALSE}
ap_lda <- LDA(AssociatedPress, k = 2, control = list(seed = 1234))
ap_lda
```

]

.panel[.panel-name[Word-topic probabilities]

- We need to find the per-topic-per-word probabilities of our dataset. 
- This will break our dataset into one-topic-per-term-per-row format, where the probability listed is the probability of a term being generated in each topic.
- This method is from the tidytext package.

```{r, echo = TRUE, eval = FALSE}
library(tidytext)

ap_topics <- tidy(ap_lda, matrix = "beta")
ap_topics
```

]

.panel[.panel-name[Finding top terms]

- We can use `slice_max()` from dplyr to find the top 10 terms for each topics
- This will be a tidy data frame, which then allows us to use ggplot2 to visualize our topics.

```{r, echo = TRUE, eval = FALSE}
library(tidyverse)

ap_top_terms <- ap_topics %>%
  group_by(topic) %>%
  slice_max(beta, n = 10) %>% 
  ungroup() %>%
  arrange(topic, -beta)

ap_top_terms %>%
  mutate(term = reorder_within(term, beta, topic)) %>%
  ggplot(aes(beta, term, fill = factor(topic))) +
  geom_col(show.legend = FALSE) +
  facet_wrap(~ topic, scales = "free") +
  scale_y_reordered()
```

- How would you name each of these topics?
]

]

---

# What's next?

.panelset[

.panel[.panel-name[Weekly Assignment]

- In this week's assignment, you will perform topic modeling on a dataset of your choosing, preferably from your own research. 
- It is likely you will want to tidy your dataset before starting the topic modeling process. Don't forget your skills!

]

.panel[.panel-name[Optional Substantive Reading(s)]

Substantive reading(s):

> 

This is linked in Canvas.

]

.panel[.panel-name[Technical Reading(s)]

- Technical reading(s):

> 

This is also linked in Canvas.

]

]